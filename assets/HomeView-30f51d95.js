import{_ as ee,a as te,b as le}from"./icon_edit-acee39d0.js";import{d as re,r as y,u as X,o as ne,n as ce,g as de,a as ue,b as c,c as oe,e as C,w as P,f as H,h as U,i as x,j as pe,k as fe,T as ve,l as b,m as d,p as K,q as T,_ as se,s as k,t as R,v as G,x as he,y as me,z as ye,F as ge,A as _e}from"./index-564ab2ec.js";import{_ as Ae}from"./TheInputForm.vue_vue_type_style_index_0_lang-d9932783.js";const xe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAALdJREFUSEvVldENgzAMRB+blE3KJC2ToE5SNoFR2KTopLhCoCSIJNDed5zz2T67ojCqwv8TIvg48lgSwXenE9yBN3A7WLoJaIHR4tcKBkAkKRBJ7SPYW3dfApv4tYLTCFJKpNhv4j4FxQlis//7PbhUgUz4AJ7OUC9Asy9kGVM5XZ8beufebASWpREsnfsfCpY9UHnUA0MWBSETXk+QY13rFjS+da1b0CXchOjBSV1ym/ijK2F3IjPl+jMZTcB64AAAAABJRU5ErkJggg==",Ee="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAW1JREFUSEvFlYFNAzEQBDedQCWBSoBKEiqBToBKoBOiibyvfdvvGFCEpde/3+fd27vzeacrj92V8TVDcCdpL4k3z5ek9/L+KN+bfo4IbiS9FNCRUAjvC2Fjt0VwkHQs1gC8SrK3EPvBjm/bPNcMPYIEh6TZFCCAP4QzjX1NwIbPAoBsYl0P1p0Hk3sf/59yX03wVmI+8vw7GDP+Vs6/W9skwWNJ6sqgoyAJWEYlarMoFvVJYA+QSFK3Rk2AnfcYY4lAElCSqPgNgVVwTgiz56uDRvKQSfwI008UOKyZ7HMeUsEMgVX2yI3lEJ7nSeAK2irPETg5I7QuFM9XBE2Cws0ReCbZBN0kO0F1mV4CXxJaEgzOUigZoqxjS7zU8BLcEch/TbvOKqAN+Dwg3S2bkNStwupZW+Ww1+zyREMwanYADptjj6DukHgLib12q0YRzjBndPvXv104rtC8XHo5+NOVOegW80szl/48WsfyBLfTcBmRPd80AAAAAElFTkSuQmCC",be=re("deleteStore",()=>{const e=y([]);function n(a,i){e.value.push({entry:a,isDelete:i})}return{deletedEntries:e,addDeletedEntry:n}});function Z(e,n){const a=X(),i=be();console.log("removeAndAddEntry",n,e),a.removeEntry(e),i.addDeletedEntry(e,n)}function ie(e){return de()?(ue(e),!0):!1}function ae(e){return typeof e=="function"?e():c(e)}const Se=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const we=Object.prototype.toString,Ce=e=>we.call(e)==="[object Object]",Y=()=>{};function ke(e){return e||oe()}function Be(e,n=!0,a){const i=ke(a);i?ne(e,i):n?e():ce(e)}function B(e){var n;const a=ae(e);return(n=a==null?void 0:a.$el)!=null?n:a}const D=Se?window:void 0;function W(...e){let n,a,i,f;if(typeof e[0]=="string"||Array.isArray(e[0])?([a,i,f]=e,n=D):[n,a,i,f]=e,!n)return Y;Array.isArray(a)||(a=[a]),Array.isArray(i)||(i=[i]);const l=[],v=()=>{l.forEach(t=>t()),l.length=0},p=(t,o,u,m)=>(t.addEventListener(o,u,m),()=>t.removeEventListener(o,u,m)),g=P(()=>[B(n),ae(f)],([t,o])=>{if(v(),!t)return;const u=Ce(o)?{...o}:o;l.push(...a.flatMap(m=>i.map(_=>p(t,m,_,u))))},{immediate:!0,flush:"post"}),h=()=>{g(),v()};return ie(h),h}function ze(){const e=y(!1);return oe()&&ne(()=>{e.value=!0}),e}function Oe(e){const n=ze();return C(()=>(n.value,!!e()))}function Te(e,n,a={}){const{window:i=D,...f}=a;let l;const v=Oe(()=>i&&"ResizeObserver"in i),p=()=>{l&&(l.disconnect(),l=void 0)},g=C(()=>Array.isArray(e)?e.map(o=>B(o)):[B(e)]),h=P(g,o=>{if(p(),v.value&&i){l=new ResizeObserver(n);for(const u of o)u&&l.observe(u,f)}},{immediate:!0,flush:"post",deep:!0}),t=()=>{p(),h()};return ie(t),{isSupported:v,stop:t}}function F(e,n={width:0,height:0},a={}){const{window:i=D,box:f="content-box"}=a,l=C(()=>{var o,u;return(u=(o=B(e))==null?void 0:o.namespaceURI)==null?void 0:u.includes("svg")}),v=y(n.width),p=y(n.height),{stop:g}=Te(e,([o])=>{const u=f==="border-box"?o.borderBoxSize:f==="content-box"?o.contentBoxSize:o.devicePixelContentBoxSize;if(i&&l.value){const m=B(e);if(m){const _=i.getComputedStyle(m);v.value=Number.parseFloat(_.width),p.value=Number.parseFloat(_.height)}}else if(u){const m=Array.isArray(u)?u:[u];v.value=m.reduce((_,{inlineSize:A})=>_+A,0),p.value=m.reduce((_,{blockSize:A})=>_+A,0)}else v.value=o.contentRect.width,p.value=o.contentRect.height},a);Be(()=>{const o=B(e);o&&(v.value="offsetWidth"in o?o.offsetWidth:n.width,p.value="offsetHeight"in o?o.offsetHeight:n.height)});const h=P(()=>B(e),o=>{v.value=o?n.width:0,p.value=o?n.height:0});function t(){g(),h()}return{width:v,height:p,stop:t}}function je(e,n={}){const{threshold:a=50,onSwipe:i,onSwipeEnd:f,onSwipeStart:l,passive:v=!0,window:p=D}=n,g=H({x:0,y:0}),h=H({x:0,y:0}),t=C(()=>g.x-h.x),o=C(()=>g.y-h.y),{max:u,abs:m}=Math,_=C(()=>u(m(t.value),m(o.value))>=a),A=y(!1),N=C(()=>_.value?m(t.value)>m(o.value)?t.value>0?"left":"right":o.value>0?"up":"down":"none"),z=s=>[s.touches[0].clientX,s.touches[0].clientY],$=(s,r)=>{g.x=s,g.y=r},S=(s,r)=>{h.x=s,h.y=r};let E;const I=Ne(p==null?void 0:p.document);v?E=I?{passive:!0}:{capture:!1}:E=I?{passive:!1,capture:!0}:{capture:!0};const L=s=>{A.value&&(f==null||f(s,N.value)),A.value=!1},O=[W(e,"touchstart",s=>{if(s.touches.length!==1)return;E.capture&&!E.passive&&s.preventDefault();const[r,w]=z(s);$(r,w),S(r,w),l==null||l(s)},E),W(e,"touchmove",s=>{if(s.touches.length!==1)return;const[r,w]=z(s);S(r,w),!A.value&&_.value&&(A.value=!0),A.value&&(i==null||i(s))},E),W(e,["touchend","touchcancel"],L,E)];return{isPassiveEventSupported:I,isSwiping:A,direction:N,coordsStart:g,coordsEnd:h,lengthX:t,lengthY:o,stop:()=>O.forEach(s=>s())}}function Ne(e){if(!e)return!1;let n=!1;const a={get passive(){return n=!0,!1}};return e.addEventListener("x",Y,a),e.removeEventListener("x",Y),n}const $e={key:0,class:"modal-mask"},Ie={class:"modal-wrapper"},Me={class:"modal-container"},Re={class:"modal-body"},Ve=U({__name:"TheInputModal",props:{isOpen:{type:Boolean,required:!0},entry:{type:Object}},emits:["close"],setup(e,{emit:n}){const a=n;function i(){a("close")}return(f,l)=>(x(),pe(ve,{name:"modal"},{default:fe(()=>[e.isOpen?(x(),b("div",$e,[d("div",Ie,[d("div",Me,[d("div",Re,[K(Ae,{onCloseaction:l[0]||(l[0]=v=>i()),entry:e.entry},null,8,["entry"])])])])])):T("",!0)]),_:1}))}});const De=se(Ve,[["__scopeId","data-v-5c52f3aa"]]),j=e=>(me("data-v-cfa838b5"),e=e(),ye(),e),We={class:"info-box-1d"},Fe={key:0,class:"entry-text"},Ye=j(()=>d("img",{alt:"Deadline",src:xe},null,-1)),Xe={key:1,class:"entry-text"},Pe=j(()=>d("img",{alt:"Expenditure",src:Ee},null,-1)),Ue={key:0,style:"color: #000000; padding: 0 0 10px 0; position: relative;",class:"text-base"},Ke={key:1},Le={class:"info-box-1d"},Je=j(()=>d("img",{alt:"Delete",style:{},src:ee},null,-1)),Qe=[Je],qe=j(()=>d("img",{alt:"Edit",src:le},null,-1)),He=[qe],Ge=j(()=>d("img",{alt:"Done",src:te},null,-1)),Ze=[Ge],V=40,et=U({__name:"CompactEntry",props:{entry:{type:Object,required:!0}},emits:["collapse-others"],setup(e,{emit:n}){const a=X(),i=e,f=y(null),l=F(f),v=y(null),p=y(null),g={width:F(p).width,height:F(p).height};let h=y(!1),t=i.entry;function o(){t.metadata.isExpanded||N(),t.metadata.isExpanded=!t.metadata.isExpanded}function u(s){console.log("Clicked Delete"),Z(s,!0)}function m(s){console.log("editClicked"),h.value=!h.value}function _(s){console.log("Clicked Done"),Z(s,!1)}function A(){h.value=!1}function N(){for(const s of a.entries)console.log(s.metadata.isExpanded),s.metadata.isExpanded&&(s.metadata.isExpanded=!1)}const z=y(null),$=C(()=>{var s;return(s=z.value)==null?void 0:s.offsetWidth}),S=y("0"),E=y(1);y(0),y(0),y(0);const{direction:I,isSwiping:L,lengthX:O,lengthY:J}=je(f,{passive:!0,onSwipe(s){if($.value&&Math.abs(J.value)<50){const r=Math.abs(O.value);r/$.value*100>V?S.value=`${-Math.sign(O.value)*V}%`:S.value=`${-Math.sign(O.value)*r}px`}else S.value="0",E.value=1},onSwipeEnd(s,r){S.value="0"}});return(s,r)=>{var w,Q,q;return x(),b("span",{ref_key:"container",ref:z,class:"horizontal-box stretch-horizontally",style:k(`position: relative; min-height: 16vh; overflow: hidden; background-color: ${c(t).color}; `)},[d("article",{ref_key:"entryBox",ref:f,class:he(["entry-box",c(t).metadata.isExpanded?"detail-height":"compact-height"]),style:k(`position: relative; width: 100%; left: ${S.value}; margin: 0; transition: all 200ms ease-out;`),onClick:r[3]||(r[3]=M=>o())},[d("aside",{class:"delete-box restrict-size",style:k(`position: absolute; display: flex; width: ${V}%; height: 100%; left: 0; transform: translateX(-100%)`)},[d("img",{alt:"",class:"icon no-padding center",src:ee,style:k(`max-width: ${c(l).height.value/2}px`)},null,4)],4),d("aside",{class:"tick-box restrict-size",style:k(`position: absolute; display: flex; width: ${V}%; height: 100%; right: 0; transform: translateX(100%)`)},[d("img",{alt:"",class:"icon no-padding center",src:te,style:k(`max-width: ${c(l).height.value/2}px`)},null,4)],4),d("div",{ref_key:"content",ref:p,style:k(`width: ${g.width}px; padding: 10px;`)},[d("h1",{ref_key:"title",ref:v,class:"text-2xl font-medium"},R((w=c(t))!=null&&w.title?(Q=c(t))==null?void 0:Q.title:""),513),d("section",We,[c(t).deadline!=null?(x(),b("span",Fe,[Ye,G(" "+R((q=c(t))==null?void 0:q.deadline.toLocaleDateString()),1)])):T("",!0),c(t).expenditure!=null?(x(),b("span",Xe,[Pe,G(" "+R(c(t).expenditure.time+" "+c(t).expenditure.unit),1)])):T("",!0)]),c(t)&&c(t).description!=null?(x(),b("p",Ue,R(c(t).description),1)):T("",!0),c(t).metadata.isExpanded?(x(),b("span",Ke,[d("nav",Le,[d("button",{onClick:r[0]||(r[0]=M=>u(c(t))),class:"flex justify-center"},Qe),d("button",{onClick:r[1]||(r[1]=M=>m(c(t))),class:"flex justify-center"},He),d("button",{onClick:r[2]||(r[2]=M=>_(c(t))),class:"flex justify-center"},Ze)])])):T("",!0)],4)],6),K(De,{"is-open":c(h),onClose:r[4]||(r[4]=M=>A()),entry:c(t)},null,8,["is-open","entry"])],4)}}});const tt=se(et,[["__scopeId","data-v-cfa838b5"]]),nt={style:"position: relative;"},at=U({__name:"HomeView",setup(e){const n=X();function a(){for(const i of n.entries)console.log(i.metadata.isExpanded),i.metadata.isExpanded&&(i.metadata.isExpanded=!1)}return(i,f)=>(x(),b("div",nt,[(x(!0),b(ge,null,_e(c(n).entries.filter(l=>l.metadata.isVisible==!0).slice(0,5),l=>(x(),b("div",{key:l.title},[K(tt,{entry:l,style:"margin-bottom: 5px",onCollapseOthers:a},null,8,["entry"])]))),128))]))}});export{at as default};
