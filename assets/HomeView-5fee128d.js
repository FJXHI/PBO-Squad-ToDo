import{_ as Z,a as ee,b as le}from"./icon_edit-34456b79.js";import{o as te,n as re,g as ce,a as ue,u as c,b as ne,c as C,r as m,w as q,d as K,e as F,f as b,h as de,i as pe,T as fe,j as E,k as u,l as Y,m as z,_ as se,p as oe,q as O,t as W,s as Q,v as he,x as L,y as ve,z as _e,F as me,A as ye}from"./index-e0db37b8.js";import{_ as xe}from"./TheInputForm.vue_vue_type_style_index_0_lang-faff4555.js";const ge="/PBO-Squad-ToDo/assets/icon_deadline.png",be="/PBO-Squad-ToDo/assets/icon_timespan.png";function ie(e){return ce()?(ue(e),!0):!1}function ae(e){return typeof e=="function"?e():c(e)}const we=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const Ee=Object.prototype.toString,Se=e=>Ee.call(e)==="[object Object]",X=()=>{};function ke(e){return e||ne()}function Ce(e,o=!0,a){const i=ke(a);i?te(e,i):o?e():re(e)}function B(e){var o;const a=ae(e);return(o=a==null?void 0:a.$el)!=null?o:a}const N=we?window:void 0;function P(...e){let o,a,i,f;if(typeof e[0]=="string"||Array.isArray(e[0])?([a,i,f]=e,o=N):[o,a,i,f]=e,!o)return X;Array.isArray(a)||(a=[a]),Array.isArray(i)||(i=[i]);const l=[],h=()=>{l.forEach(t=>t()),l.length=0},p=(t,n,d,_)=>(t.addEventListener(n,d,_),()=>t.removeEventListener(n,d,_)),y=q(()=>[B(o),ae(f)],([t,n])=>{if(h(),!t)return;const d=Se(n)?{...n}:n;l.push(...a.flatMap(_=>i.map(x=>p(t,_,x,d))))},{immediate:!0,flush:"post"}),v=()=>{y(),h()};return ie(v),v}function $e(){const e=m(!1);return ne()&&te(()=>{e.value=!0}),e}function Oe(e){const o=$e();return C(()=>(o.value,!!e()))}function Be(e,o,a={}){const{window:i=N,...f}=a;let l;const h=Oe(()=>i&&"ResizeObserver"in i),p=()=>{l&&(l.disconnect(),l=void 0)},y=C(()=>Array.isArray(e)?e.map(n=>B(n)):[B(e)]),v=q(y,n=>{if(p(),h.value&&i){l=new ResizeObserver(o);for(const d of n)d&&l.observe(d,f)}},{immediate:!0,flush:"post",deep:!0}),t=()=>{p(),v()};return ie(t),{isSupported:h,stop:t}}function R(e,o={width:0,height:0},a={}){const{window:i=N,box:f="content-box"}=a,l=C(()=>{var n,d;return(d=(n=B(e))==null?void 0:n.namespaceURI)==null?void 0:d.includes("svg")}),h=m(o.width),p=m(o.height),{stop:y}=Be(e,([n])=>{const d=f==="border-box"?n.borderBoxSize:f==="content-box"?n.contentBoxSize:n.devicePixelContentBoxSize;if(i&&l.value){const _=B(e);if(_){const x=i.getComputedStyle(_);h.value=Number.parseFloat(x.width),p.value=Number.parseFloat(x.height)}}else if(d){const _=Array.isArray(d)?d:[d];h.value=_.reduce((x,{inlineSize:g})=>x+g,0),p.value=_.reduce((x,{blockSize:g})=>x+g,0)}else h.value=n.contentRect.width,p.value=n.contentRect.height},a);Ce(()=>{const n=B(e);n&&(h.value="offsetWidth"in n?n.offsetWidth:o.width,p.value="offsetHeight"in n?n.offsetHeight:o.height)});const v=q(()=>B(e),n=>{h.value=n?o.width:0,p.value=n?o.height:0});function t(){y(),v()}return{width:h,height:p,stop:t}}function Me(e,o={}){const{threshold:a=50,onSwipe:i,onSwipeEnd:f,onSwipeStart:l,passive:h=!0,window:p=N}=o,y=K({x:0,y:0}),v=K({x:0,y:0}),t=C(()=>y.x-v.x),n=C(()=>y.y-v.y),{max:d,abs:_}=Math,x=C(()=>d(_(t.value),_(n.value))>=a),g=m(!1),I=C(()=>x.value?_(t.value)>_(n.value)?t.value>0?"left":"right":n.value>0?"up":"down":"none"),T=s=>[s.touches[0].clientX,s.touches[0].clientY],M=(s,r)=>{y.x=s,y.y=r},S=(s,r)=>{v.x=s,v.y=r};let w;const A=Te(p==null?void 0:p.document);h?w=A?{passive:!0}:{capture:!1}:w=A?{passive:!1,capture:!0}:{capture:!0};const G=s=>{g.value&&(f==null||f(s,I.value)),g.value=!1},$=[P(e,"touchstart",s=>{if(s.touches.length!==1)return;w.capture&&!w.passive&&s.preventDefault();const[r,k]=T(s);M(r,k),S(r,k),l==null||l(s)},w),P(e,"touchmove",s=>{if(s.touches.length!==1)return;const[r,k]=T(s);S(r,k),!g.value&&x.value&&(g.value=!0),g.value&&(i==null||i(s))},w),P(e,["touchend","touchcancel"],G,w)];return{isPassiveEventSupported:A,isSwiping:g,direction:I,coordsStart:y,coordsEnd:v,lengthX:t,lengthY:n,stop:()=>$.forEach(s=>s())}}function Te(e){if(!e)return!1;let o=!1;const a={get passive(){return o=!0,!1}};return e.addEventListener("x",X,a),e.removeEventListener("x",X),o}const ze={key:0,class:"modal-mask"},De={class:"modal-wrapper"},Ie={class:"modal-container"},Ae={class:"modal-body"},je=F({__name:"TheInputModal",props:{isOpen:{type:Boolean,required:!0},entry:{type:Object}},emits:["close"],setup(e,{emit:o}){const a=o;function i(){a("close")}return(f,l)=>(b(),de(fe,{name:"modal"},{default:pe(()=>[e.isOpen?(b(),E("div",ze,[u("div",De,[u("div",Ie,[u("div",Ae,[Y(xe,{onCloseaction:l[0]||(l[0]=h=>i()),entry:e.entry},null,8,["entry"])])])])])):z("",!0)]),_:1}))}});const We=se(je,[["__scopeId","data-v-d5634a4d"]]),D=e=>(ve("data-v-28aae328"),e=e(),_e(),e),Le={class:"info-box-1d"},Ve={key:0,class:"entry-text"},Ne=D(()=>u("img",{alt:"Deadline",src:ge},null,-1)),Pe={key:1,class:"entry-text"},Re=D(()=>u("img",{alt:"Expenditure",src:be},null,-1)),Xe={key:0,style:"color: #000000; padding: 0 0 10px 0; position: relative;",class:"text-base"},qe={key:1},Fe={class:"info-box-1d"},Ye=D(()=>u("img",{alt:"Delete",style:{},src:Z},null,-1)),Ge=[Ye],He=D(()=>u("img",{alt:"Edit",src:le},null,-1)),Ue=[He],Je=D(()=>u("img",{alt:"Done",src:ee},null,-1)),Ke=[Je],V=40,Qe=F({__name:"CompactEntry",props:{entry:{type:Object,required:!0}},emits:["collapse-others"],setup(e,{emit:o}){const a=oe(),i=e,f=m(null),l=R(f),h=m(null),p=m(null),y={width:R(p).width,height:R(p).height};let v=m(!1),t=i.entry;function n(){t.metadata.isExpanded||I(),t.metadata.isExpanded=!t.metadata.isExpanded}function d(s){console.log("Clicked Delete"),L(s,!0)}function _(s){console.log("editClicked"),v.value=!v.value}function x(s){console.log("Clicked Done"),L(s,!1)}function g(){v.value=!1}function I(){for(const s of a.entries)console.log(s.metadata.isExpanded),s.metadata.isExpanded&&(s.metadata.isExpanded=!1)}const T=m(null),M=C(()=>{var s;return(s=T.value)==null?void 0:s.offsetWidth}),S=m("0"),w=m(1);m(0),m(0),m(0);const{direction:A,isSwiping:G,lengthX:$,lengthY:H}=Me(f,{passive:!0,onSwipe(s){if(M.value&&Math.abs(H.value)<50){const r=Math.abs($.value);r/M.value*100>V?S.value=`${-Math.sign($.value)*V}%`:S.value=`${-Math.sign($.value)*r}px`}else S.value="0",w.value=1},onSwipeEnd(s,r){M.value&&Math.abs($.value)/M.value>=.5?$.value<0?L(t,!0):L(t,!1):S.value="0"}});return(s,r)=>{var k,U,J;return b(),E("span",{ref_key:"container",ref:T,class:"horizontal-box stretch-horizontally",style:O(`position: relative; min-height: 16vh; overflow: hidden; background-color: ${c(t).color}; `)},[u("article",{ref_key:"entryBox",ref:f,class:he(["entry-box",c(t).metadata.isExpanded?"detail-height":"compact-height"]),style:O(`position: relative; width: 100%; left: ${S.value}; margin: 0; transition: all 200ms ease-out;`),onClick:r[3]||(r[3]=j=>n())},[u("aside",{class:"delete-box restrict-size",style:O(`position: absolute; display: flex; width: ${V}%; height: 100%; left: 0; transform: translateX(-100%)`)},[u("img",{alt:"",class:"icon no-padding center",src:Z,style:O(`max-width: ${c(l).height.value/2}px`)},null,4)],4),u("aside",{class:"tick-box restrict-size",style:O(`position: absolute; display: flex; width: ${V}%; height: 100%; right: 0; transform: translateX(100%)`)},[u("img",{alt:"",class:"icon no-padding center",src:ee,style:O(`max-width: ${c(l).height.value/2}px`)},null,4)],4),u("div",{ref_key:"content",ref:p,style:O(`width: ${y.width}px; padding: 10px;`)},[u("h1",{ref_key:"title",ref:h,class:"text-2xl font-medium"},W((k=c(t))!=null&&k.title?(U=c(t))==null?void 0:U.title:""),513),u("section",Le,[c(t).deadline!=null?(b(),E("span",Ve,[Ne,Q(" "+W((J=c(t))==null?void 0:J.deadline.toLocaleDateString()),1)])):z("",!0),c(t).expenditure!=null?(b(),E("span",Pe,[Re,Q(" "+W(c(t).expenditure.time+" "+c(t).expenditure.unit),1)])):z("",!0)]),c(t)&&c(t).description!=null?(b(),E("p",Xe,W(c(t).description),1)):z("",!0),c(t).metadata.isExpanded?(b(),E("span",qe,[u("nav",Fe,[u("button",{onClick:r[0]||(r[0]=j=>d(c(t))),class:"flex justify-center"},Ge),u("button",{onClick:r[1]||(r[1]=j=>_(c(t))),class:"flex justify-center"},Ue),u("button",{onClick:r[2]||(r[2]=j=>x(c(t))),class:"flex justify-center"},Ke)])])):z("",!0)],4)],6),Y(We,{"is-open":c(v),onClose:r[4]||(r[4]=j=>g()),entry:c(t)},null,8,["is-open","entry"])],4)}}});const Ze=se(Qe,[["__scopeId","data-v-28aae328"]]),et={style:"position: relative;"},ot=F({__name:"HomeView",setup(e){const o=oe();function a(){for(const i of o.entries)console.log(i.metadata.isExpanded),i.metadata.isExpanded&&(i.metadata.isExpanded=!1)}return(i,f)=>(b(),E("div",et,[(b(!0),E(me,null,ye(c(o).entries.filter(l=>l.metadata.isVisible==!0).slice(0,5),l=>(b(),E("div",{key:l.title},[Y(Ze,{entry:l,style:"margin-bottom: 5px",onCollapseOthers:a},null,8,["entry"])]))),128))]))}});export{ot as default};
