import{_ as te,a as oe,b as le}from"./icon_edit-acee39d0.js";import{d as ce,r as y,u as P,o as ne,n as de,g as ue,a as pe,b as l,c as se,e as w,w as U,f as G,h as K,i as b,j as fe,k as ve,T as he,l as S,m as d,p as L,q as O,_ as ie,s as C,t as R,v as Z,x as me,y as ge,z as ye,F as _e,A as Ae}from"./index-37b03470.js";import{_ as xe}from"./TheInputForm.vue_vue_type_style_index_0_lang-1b027cee.js";const Ee="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAALdJREFUSEvVldENgzAMRB+blE3KJC2ToE5SNoFR2KTopLhCoCSIJNDed5zz2T67ojCqwv8TIvg48lgSwXenE9yBN3A7WLoJaIHR4tcKBkAkKRBJ7SPYW3dfApv4tYLTCFJKpNhv4j4FxQlis//7PbhUgUz4AJ7OUC9Asy9kGVM5XZ8beufebASWpREsnfsfCpY9UHnUA0MWBSETXk+QY13rFjS+da1b0CXchOjBSV1ym/ijK2F3IjPl+jMZTcB64AAAAABJRU5ErkJggg==",be="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAW1JREFUSEvFlYFNAzEQBDedQCWBSoBKEiqBToBKoBOiibyvfdvvGFCEpde/3+fd27vzeacrj92V8TVDcCdpL4k3z5ek9/L+KN+bfo4IbiS9FNCRUAjvC2Fjt0VwkHQs1gC8SrK3EPvBjm/bPNcMPYIEh6TZFCCAP4QzjX1NwIbPAoBsYl0P1p0Hk3sf/59yX03wVmI+8vw7GDP+Vs6/W9skwWNJ6sqgoyAJWEYlarMoFvVJYA+QSFK3Rk2AnfcYY4lAElCSqPgNgVVwTgiz56uDRvKQSfwI008UOKyZ7HMeUsEMgVX2yI3lEJ7nSeAK2irPETg5I7QuFM9XBE2Cws0ReCbZBN0kO0F1mV4CXxJaEgzOUigZoqxjS7zU8BLcEch/TbvOKqAN+Dwg3S2bkNStwupZW+Ww1+zyREMwanYADptjj6DukHgLib12q0YRzjBndPvXv104rtC8XHo5+NOVOegW80szl/48WsfyBLfTcBmRPd80AAAAAElFTkSuQmCC",Se=ce("deleteStore",()=>{const e=y([]);function o(i,s){e.value.push({entry:i,isDelete:s})}return{deletedEntries:e,addDeletedEntry:o}});function ee(e,o){const i=P(),s=Se();console.log("removeAndAddEntry",o,e),i.removeEntry(e),s.addDeletedEntry(e,o)}function ae(e){return ue()?(pe(e),!0):!1}function re(e){return typeof e=="function"?e():l(e)}const we=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const Ce=Object.prototype.toString,ke=e=>Ce.call(e)==="[object Object]",X=()=>{};function Be(e){return e||se()}function ze(e,o=!0,i){const s=Be(i);s?ne(e,s):o?e():de(e)}function k(e){var o;const i=re(e);return(o=i==null?void 0:i.$el)!=null?o:i}const W=we?window:void 0;function Y(...e){let o,i,s,h;if(typeof e[0]=="string"||Array.isArray(e[0])?([i,s,h]=e,o=W):[o,i,s,h]=e,!o)return X;Array.isArray(i)||(i=[i]),Array.isArray(s)||(s=[s]);const a=[],f=()=>{a.forEach(t=>t()),a.length=0},v=(t,n,u,g)=>(t.addEventListener(n,u,g),()=>t.removeEventListener(n,u,g)),_=U(()=>[k(o),re(h)],([t,n])=>{if(f(),!t)return;const u=ke(n)?{...n}:n;a.push(...i.flatMap(g=>s.map(A=>v(t,g,A,u))))},{immediate:!0,flush:"post"}),m=()=>{_(),f()};return ae(m),m}function Oe(){const e=y(!1);return se()&&ne(()=>{e.value=!0}),e}function Te(e){const o=Oe();return w(()=>(o.value,!!e()))}function je(e,o,i={}){const{window:s=W,...h}=i;let a;const f=Te(()=>s&&"ResizeObserver"in s),v=()=>{a&&(a.disconnect(),a=void 0)},_=w(()=>Array.isArray(e)?e.map(n=>k(n)):[k(e)]),m=U(_,n=>{if(v(),f.value&&s){a=new ResizeObserver(o);for(const u of n)u&&a.observe(u,h)}},{immediate:!0,flush:"post",deep:!0}),t=()=>{v(),m()};return ae(t),{isSupported:f,stop:t}}function V(e,o={width:0,height:0},i={}){const{window:s=W,box:h="content-box"}=i,a=w(()=>{var n,u;return(u=(n=k(e))==null?void 0:n.namespaceURI)==null?void 0:u.includes("svg")}),f=y(o.width),v=y(o.height),{stop:_}=je(e,([n])=>{const u=h==="border-box"?n.borderBoxSize:h==="content-box"?n.contentBoxSize:n.devicePixelContentBoxSize;if(s&&a.value){const g=k(e);if(g){const A=s.getComputedStyle(g);f.value=Number.parseFloat(A.width),v.value=Number.parseFloat(A.height)}}else if(u){const g=Array.isArray(u)?u:[u];f.value=g.reduce((A,{inlineSize:E})=>A+E,0),v.value=g.reduce((A,{blockSize:E})=>A+E,0)}else f.value=n.contentRect.width,v.value=n.contentRect.height},i);ze(()=>{const n=k(e);n&&(f.value="offsetWidth"in n?n.offsetWidth:o.width,v.value="offsetHeight"in n?n.offsetHeight:o.height)});const m=U(()=>k(e),n=>{f.value=n?o.width:0,v.value=n?o.height:0});function t(){_(),m()}return{width:f,height:v,stop:t}}function Ne(e,o={}){const{threshold:i=50,onSwipe:s,onSwipeEnd:h,onSwipeStart:a,passive:f=!0,window:v=W}=o,_=G({x:0,y:0}),m=G({x:0,y:0}),t=w(()=>_.x-m.x),n=w(()=>_.y-m.y),{max:u,abs:g}=Math,A=w(()=>u(g(t.value),g(n.value))>=i),E=y(!1),j=w(()=>A.value?g(t.value)>g(n.value)?t.value>0?"left":"right":n.value>0?"up":"down":"none"),N=c=>[c.touches[0].clientX,c.touches[0].clientY],$=(c,r)=>{_.x=c,_.y=r},B=(c,r)=>{m.x=c,m.y=r};let x;const z=$e(v==null?void 0:v.document);f?x=z?{passive:!0}:{capture:!1}:x=z?{passive:!1,capture:!0}:{capture:!0};const J=c=>{E.value&&(h==null||h(c,j.value)),E.value=!1},Q=[Y(e,"touchstart",c=>{if(c.touches.length!==1)return;x.capture&&!x.passive&&c.preventDefault();const[r,p]=N(c);$(r,p),B(r,p),a==null||a(c)},x),Y(e,"touchmove",c=>{if(c.touches.length!==1)return;const[r,p]=N(c);B(r,p),!E.value&&A.value&&(E.value=!0),E.value&&(s==null||s(c))},x),Y(e,["touchend","touchcancel"],J,x)];return{isPassiveEventSupported:z,isSwiping:E,direction:j,coordsStart:_,coordsEnd:m,lengthX:t,lengthY:n,stop:()=>Q.forEach(c=>c())}}function $e(e){if(!e)return!1;let o=!1;const i={get passive(){return o=!0,!1}};return e.addEventListener("x",X,i),e.removeEventListener("x",X),o}const Ie={key:0,class:"modal-mask"},Me={class:"modal-wrapper"},Re={class:"modal-container"},Ve={class:"modal-body"},De=K({__name:"TheInputModal",props:{isOpen:{type:Boolean,required:!0},entry:{type:Object}},emits:["close"],setup(e,{emit:o}){const i=o;function s(){i("close")}return(h,a)=>(b(),fe(he,{name:"modal"},{default:ve(()=>[e.isOpen?(b(),S("div",Ie,[d("div",Me,[d("div",Re,[d("div",Ve,[L(xe,{onCloseaction:a[0]||(a[0]=f=>s()),entry:e.entry},null,8,["entry"])])])])])):O("",!0)]),_:1}))}});const We=ie(De,[["__scopeId","data-v-5c52f3aa"]]),T=e=>(ge("data-v-beaeab37"),e=e(),ye(),e),Fe={class:"info-box-1d"},Ye={key:0,class:"entry-text"},Xe=T(()=>d("img",{alt:"Deadline",src:Ee},null,-1)),Pe={key:1,class:"entry-text"},Ue=T(()=>d("img",{alt:"Expenditure",src:be},null,-1)),Ke={key:0,style:"color: #000000; padding: 0 0 10px 0; position: relative;",class:"text-base"},Le={key:1},Je={class:"info-box-1d"},Qe=T(()=>d("img",{alt:"Delete",style:{},src:te},null,-1)),qe=[Qe],He=T(()=>d("img",{alt:"Edit",src:le},null,-1)),Ge=[He],Ze=T(()=>d("img",{alt:"Done",src:oe},null,-1)),et=[Ze],D=40,tt=K({__name:"CompactEntry",props:{entry:{type:Object,required:!0}},emits:["collapse-others"],setup(e,{emit:o}){const i=P(),s=e,h=y(null),a=V(h);y(!1);const f=y(null);V(f);const v=y(null),_={width:V(v).width,height:V(v).height};let m=y(!1),t=s.entry,n="rgba("+t.color.r.toString()+","+t.color.g.toString()+","+t.color.b.toString()+","+(t.color.a?t.color.a:255)+")";function u(){t.metadata.isExpanded||N(),t.metadata.isExpanded=!t.metadata.isExpanded}function g(r){console.log("Clicked Delete"),ee(r,!0)}function A(r){console.log("editClicked"),m.value=!m.value}function E(r){console.log("Clicked Done"),ee(r,!1)}function j(){m.value=!1}function N(){for(const r of i.entries)console.log(r.metadata.isExpanded),r.metadata.isExpanded&&(r.metadata.isExpanded=!1)}const $=y(null),B=w(()=>{var r;return(r=$.value)==null?void 0:r.offsetWidth}),x=y("0"),z=y(1);y(0),y(0),y(0);const{direction:J,isSwiping:Q,lengthX:I,lengthY:c}=Ne(h,{passive:!0,onSwipe(r){if(B.value&&Math.abs(c.value)<50){const p=Math.abs(I.value);p/B.value*100>D?x.value=`${-Math.sign(I.value)*D}%`:x.value=`${-Math.sign(I.value)*p}px`}else x.value="0",z.value=1},onSwipeEnd(r,p){x.value="0"}});return(r,p)=>{var F,q,H;return b(),S("span",{ref_key:"container",ref:$,class:"horizontal-box stretch-horizontally",style:C(`position: relative; min-height: 16vh; overflow: hidden; background-color: ${l(n)}; `)},[d("article",{ref_key:"entryBox",ref:h,class:me(["entry-box",l(t).metadata.isExpanded?"detail-height":"compact-height"]),style:C(`position: relative; width: 100%; left: ${x.value}; margin: 0; transition: all 200ms ease-out;`),onClick:p[3]||(p[3]=M=>u())},[d("aside",{class:"delete-box restrict-size",style:C(`position: absolute; display: flex; width: ${D}%; height: 100%; left: 0; transform: translateX(-100%)`)},[d("img",{alt:"",class:"icon no-padding center",src:te,style:C(`max-width: ${l(a).height.value/2}px`)},null,4)],4),d("aside",{class:"tick-box restrict-size",style:C(`position: absolute; display: flex; width: ${D}%; height: 100%; right: 0; transform: translateX(100%)`)},[d("img",{alt:"",class:"icon no-padding center",src:oe,style:C(`max-width: ${l(a).height.value/2}px`)},null,4)],4),d("div",{ref_key:"content",ref:v,style:C(`width: ${_.width}px; padding: 10px;`)},[d("h1",{ref_key:"title",ref:f,class:"text-2xl font-medium"},R((F=l(t))!=null&&F.title?(q=l(t))==null?void 0:q.title:""),513),d("section",Fe,[l(t).deadline!=null?(b(),S("span",Ye,[Xe,Z(" "+R((H=l(t))==null?void 0:H.deadline.toLocaleDateString()),1)])):O("",!0),l(t).expenditure!=null?(b(),S("span",Pe,[Ue,Z(" "+R(l(t).expenditure.time+" "+l(t).expenditure.unit),1)])):O("",!0)]),l(t)&&l(t).description!=null?(b(),S("p",Ke,R(l(t).description),1)):O("",!0),l(t).metadata.isExpanded?(b(),S("span",Le,[d("nav",Je,[d("button",{onClick:p[0]||(p[0]=M=>g(l(t))),class:"flex justify-center"},qe),d("button",{onClick:p[1]||(p[1]=M=>A(l(t))),class:"flex justify-center"},Ge),d("button",{onClick:p[2]||(p[2]=M=>E(l(t))),class:"flex justify-center"},et)])])):O("",!0)],4)],6),L(We,{"is-open":l(m),onClose:p[4]||(p[4]=M=>j()),entry:l(t)},null,8,["is-open","entry"])],4)}}});const ot=ie(tt,[["__scopeId","data-v-beaeab37"]]),nt={style:"position: relative;"},rt=K({__name:"HomeView",setup(e){const o=P();function i(){for(const s of o.entries)console.log(s.metadata.isExpanded),s.metadata.isExpanded&&(s.metadata.isExpanded=!1)}return(s,h)=>(b(),S("div",nt,[(b(!0),S(_e,null,Ae(l(o).entries.filter(a=>a.metadata.isVisible==!0).slice(0,5),a=>(b(),S("div",{key:a.title},[L(ot,{entry:a,style:"margin-bottom: 5px",onCollapseOthers:i},null,8,["entry"])]))),128))]))}});export{rt as default};
