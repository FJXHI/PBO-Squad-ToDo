import{_ as te,a as oe,b as ae}from"./icon_edit-acee39d0.js";import{d as ce,r as _,u as P,o as ne,n as de,g as ue,a as pe,b as a,c as se,e as w,w as U,f as G,h as K,i as S,j as fe,k as ve,T as he,l as b,m as d,p as L,q as O,_ as ie,s as C,t as R,v as Z,x as ye,y as ge,z as _e,F as me,A as Ae}from"./index-3237e6d9.js";import{_ as Ee}from"./TheInputForm.vue_vue_type_style_index_0_lang-e452b17f.js";const xe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAALdJREFUSEvVldENgzAMRB+blE3KJC2ToE5SNoFR2KTopLhCoCSIJNDed5zz2T67ojCqwv8TIvg48lgSwXenE9yBN3A7WLoJaIHR4tcKBkAkKRBJ7SPYW3dfApv4tYLTCFJKpNhv4j4FxQlis//7PbhUgUz4AJ7OUC9Asy9kGVM5XZ8beufebASWpREsnfsfCpY9UHnUA0MWBSETXk+QY13rFjS+da1b0CXchOjBSV1ym/ijK2F3IjPl+jMZTcB64AAAAABJRU5ErkJggg==",Se="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAW1JREFUSEvFlYFNAzEQBDedQCWBSoBKEiqBToBKoBOiibyvfdvvGFCEpde/3+fd27vzeacrj92V8TVDcCdpL4k3z5ek9/L+KN+bfo4IbiS9FNCRUAjvC2Fjt0VwkHQs1gC8SrK3EPvBjm/bPNcMPYIEh6TZFCCAP4QzjX1NwIbPAoBsYl0P1p0Hk3sf/59yX03wVmI+8vw7GDP+Vs6/W9skwWNJ6sqgoyAJWEYlarMoFvVJYA+QSFK3Rk2AnfcYY4lAElCSqPgNgVVwTgiz56uDRvKQSfwI008UOKyZ7HMeUsEMgVX2yI3lEJ7nSeAK2irPETg5I7QuFM9XBE2Cws0ReCbZBN0kO0F1mV4CXxJaEgzOUigZoqxjS7zU8BLcEch/TbvOKqAN+Dwg3S2bkNStwupZW+Ww1+zyREMwanYADptjj6DukHgLib12q0YRzjBndPvXv104rtC8XHo5+NOVOegW80szl/48WsfyBLfTcBmRPd80AAAAAElFTkSuQmCC",be=ce("deleteStore",()=>{const e=_([]);function o(i,s){e.value.push({entry:i,isDelete:s})}return{deletedEntries:e,addDeletedEntry:o}});function ee(e,o){const i=P(),s=be();console.log("removeAndAddEntry",o,e),i.removeEntry(e),s.addDeletedEntry(e,o)}function re(e){return ue()?(pe(e),!0):!1}function le(e){return typeof e=="function"?e():a(e)}const we=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const Ce=Object.prototype.toString,ke=e=>Ce.call(e)==="[object Object]",X=()=>{};function Be(e){return e||se()}function ze(e,o=!0,i){const s=Be(i);s?ne(e,s):o?e():de(e)}function k(e){var o;const i=le(e);return(o=i==null?void 0:i.$el)!=null?o:i}const W=we?window:void 0;function Y(...e){let o,i,s,h;if(typeof e[0]=="string"||Array.isArray(e[0])?([i,s,h]=e,o=W):[o,i,s,h]=e,!o)return X;Array.isArray(i)||(i=[i]),Array.isArray(s)||(s=[s]);const r=[],f=()=>{r.forEach(t=>t()),r.length=0},v=(t,n,u,g)=>(t.addEventListener(n,u,g),()=>t.removeEventListener(n,u,g)),m=U(()=>[k(o),le(h)],([t,n])=>{if(f(),!t)return;const u=ke(n)?{...n}:n;r.push(...i.flatMap(g=>s.map(A=>v(t,g,A,u))))},{immediate:!0,flush:"post"}),y=()=>{m(),f()};return re(y),y}function Oe(){const e=_(!1);return se()&&ne(()=>{e.value=!0}),e}function Te(e){const o=Oe();return w(()=>(o.value,!!e()))}function je(e,o,i={}){const{window:s=W,...h}=i;let r;const f=Te(()=>s&&"ResizeObserver"in s),v=()=>{r&&(r.disconnect(),r=void 0)},m=w(()=>Array.isArray(e)?e.map(n=>k(n)):[k(e)]),y=U(m,n=>{if(v(),f.value&&s){r=new ResizeObserver(o);for(const u of n)u&&r.observe(u,h)}},{immediate:!0,flush:"post",deep:!0}),t=()=>{v(),y()};return re(t),{isSupported:f,stop:t}}function V(e,o={width:0,height:0},i={}){const{window:s=W,box:h="content-box"}=i,r=w(()=>{var n,u;return(u=(n=k(e))==null?void 0:n.namespaceURI)==null?void 0:u.includes("svg")}),f=_(o.width),v=_(o.height),{stop:m}=je(e,([n])=>{const u=h==="border-box"?n.borderBoxSize:h==="content-box"?n.contentBoxSize:n.devicePixelContentBoxSize;if(s&&r.value){const g=k(e);if(g){const A=s.getComputedStyle(g);f.value=Number.parseFloat(A.width),v.value=Number.parseFloat(A.height)}}else if(u){const g=Array.isArray(u)?u:[u];f.value=g.reduce((A,{inlineSize:x})=>A+x,0),v.value=g.reduce((A,{blockSize:x})=>A+x,0)}else f.value=n.contentRect.width,v.value=n.contentRect.height},i);ze(()=>{const n=k(e);n&&(f.value="offsetWidth"in n?n.offsetWidth:o.width,v.value="offsetHeight"in n?n.offsetHeight:o.height)});const y=U(()=>k(e),n=>{f.value=n?o.width:0,v.value=n?o.height:0});function t(){m(),y()}return{width:f,height:v,stop:t}}function Ne(e,o={}){const{threshold:i=50,onSwipe:s,onSwipeEnd:h,onSwipeStart:r,passive:f=!0,window:v=W}=o,m=G({x:0,y:0}),y=G({x:0,y:0}),t=w(()=>m.x-y.x),n=w(()=>m.y-y.y),{max:u,abs:g}=Math,A=w(()=>u(g(t.value),g(n.value))>=i),x=_(!1),j=w(()=>A.value?g(t.value)>g(n.value)?t.value>0?"left":"right":n.value>0?"up":"down":"none"),N=c=>[c.touches[0].clientX,c.touches[0].clientY],$=(c,l)=>{m.x=c,m.y=l},B=(c,l)=>{y.x=c,y.y=l};let E;const z=$e(v==null?void 0:v.document);f?E=z?{passive:!0}:{capture:!1}:E=z?{passive:!1,capture:!0}:{capture:!0};const J=c=>{x.value&&(h==null||h(c,j.value)),x.value=!1},Q=[Y(e,"touchstart",c=>{if(c.touches.length!==1)return;E.capture&&!E.passive&&c.preventDefault();const[l,p]=N(c);$(l,p),B(l,p),r==null||r(c)},E),Y(e,"touchmove",c=>{if(c.touches.length!==1)return;const[l,p]=N(c);B(l,p),!x.value&&A.value&&(x.value=!0),x.value&&(s==null||s(c))},E),Y(e,["touchend","touchcancel"],J,E)];return{isPassiveEventSupported:z,isSwiping:x,direction:j,coordsStart:m,coordsEnd:y,lengthX:t,lengthY:n,stop:()=>Q.forEach(c=>c())}}function $e(e){if(!e)return!1;let o=!1;const i={get passive(){return o=!0,!1}};return e.addEventListener("x",X,i),e.removeEventListener("x",X),o}const Ie={key:0,class:"modal-mask"},Me={class:"modal-wrapper"},Re={class:"modal-container"},Ve={class:"modal-body"},De=K({__name:"TheInputModal",props:{isOpen:{type:Boolean,required:!0},entry:{type:Object}},emits:["close"],setup(e,{emit:o}){const i=o;function s(){i("close")}return(h,r)=>(S(),fe(he,{name:"modal"},{default:ve(()=>[e.isOpen?(S(),b("div",Ie,[d("div",Me,[d("div",Re,[d("div",Ve,[L(Ee,{onCloseaction:r[0]||(r[0]=f=>s()),entry:e.entry},null,8,["entry"])])])])])):O("",!0)]),_:1}))}});const We=ie(De,[["__scopeId","data-v-5c52f3aa"]]),T=e=>(ge("data-v-a515f72a"),e=e(),_e(),e),Fe={class:"info-box-1d"},Ye={key:0,class:"entry-text"},Xe=T(()=>d("img",{alt:"Deadline",src:xe},null,-1)),Pe={key:1,class:"entry-text"},Ue=T(()=>d("img",{alt:"Expenditure",src:Se},null,-1)),Ke={key:0,style:"color: #000000; padding: 0 0 10px 0; position: relative;",class:"text-base"},Le={key:1},Je={class:"info-box-1d"},Qe=T(()=>d("img",{alt:"Delete",style:{},src:te},null,-1)),qe=[Qe],He=T(()=>d("img",{alt:"Edit",src:ae},null,-1)),Ge=[He],Ze=T(()=>d("img",{alt:"Done",src:oe},null,-1)),et=[Ze],D=40,tt=K({__name:"CompactEntry",props:{entry:{type:Object,required:!0}},emits:["collapse-others"],setup(e,{emit:o}){const i=P(),s=e,h=_(null),r=V(h);_(!1);const f=_(null);V(f);const v=_(null),m={width:V(v).width,height:V(v).height};let y=_(!1),t=s.entry,n="rgba("+t.todoEntry.color.r.toString()+","+t.todoEntry.color.g.toString()+","+t.todoEntry.color.b.toString()+","+(t.todoEntry.color.a?t.todoEntry.color.a:255)+")";function u(){t.isExpanded||N(),t.isExpanded=!t.isExpanded}function g(l){console.log("Clicked Delete"),ee(l,!0)}function A(l){console.log("editClicked"),y.value=!y.value}function x(l){console.log("Clicked Done"),ee(l,!1)}function j(){y.value=!1}function N(){for(const l of i.entries)console.log(l.isExpanded),l.isExpanded&&(l.isExpanded=!1)}const $=_(null),B=w(()=>{var l;return(l=$.value)==null?void 0:l.offsetWidth}),E=_("0"),z=_(1);_(0),_(0),_(0);const{direction:J,isSwiping:Q,lengthX:I,lengthY:c}=Ne(h,{passive:!0,onSwipe(l){if(B.value&&Math.abs(c.value)<50){const p=Math.abs(I.value);p/B.value*100>D?E.value=`${-Math.sign(I.value)*D}%`:E.value=`${-Math.sign(I.value)*p}px`}else E.value="0",z.value=1},onSwipeEnd(l,p){E.value="0"}});return(l,p)=>{var F,q,H;return S(),b("span",{ref_key:"container",ref:$,class:"horizontal-box stretch-horizontally",style:C(`position: relative; min-height: 16vh; overflow: hidden; background-color: ${a(n)}; `)},[d("article",{ref_key:"entryBox",ref:h,class:ye(["entry-box",a(t).isExpanded?"detail-height":"compact-height"]),style:C(`position: relative; width: 100%; left: ${E.value}; margin: 0; transition: all 200ms ease-out;`),onClick:p[3]||(p[3]=M=>u())},[d("aside",{class:"delete-box restrict-size",style:C(`position: absolute; display: flex; width: ${D}%; height: 100%; left: 0; transform: translateX(-100%)`)},[d("img",{alt:"",class:"icon no-padding center",src:te,style:C(`max-width: ${a(r).height.value/2}px`)},null,4)],4),d("aside",{class:"tick-box restrict-size",style:C(`position: absolute; display: flex; width: ${D}%; height: 100%; right: 0; transform: translateX(100%)`)},[d("img",{alt:"",class:"icon no-padding center",src:oe,style:C(`max-width: ${a(r).height.value/2}px`)},null,4)],4),d("div",{ref_key:"content",ref:v,style:C(`width: ${m.width}px; padding: 10px;`)},[d("h1",{ref_key:"title",ref:f,class:"text-2xl font-medium"},R((F=a(t))!=null&&F.todoEntry.title?(q=a(t))==null?void 0:q.todoEntry.title:""),513),d("section",Fe,[a(t).todoEntry.deadline!=null?(S(),b("span",Ye,[Xe,Z(" "+R((H=a(t))==null?void 0:H.todoEntry.deadline.toLocaleDateString()),1)])):O("",!0),a(t).todoEntry.expenditure!=null?(S(),b("span",Pe,[Ue,Z(" "+R(a(t).todoEntry.expenditure.time+" "+a(t).todoEntry.expenditure.unit),1)])):O("",!0)]),a(t).isExpanded&&a(t).todoEntry.description!=null?(S(),b("p",Ke,R(a(t).todoEntry.description),1)):O("",!0),a(t).isExpanded?(S(),b("span",Le,[d("nav",Je,[d("button",{onClick:p[0]||(p[0]=M=>g(a(t))),class:"flex justify-center"},qe),d("button",{onClick:p[1]||(p[1]=M=>A(a(t))),class:"flex justify-center"},Ge),d("button",{onClick:p[2]||(p[2]=M=>x(a(t))),class:"flex justify-center"},et)])])):O("",!0)],4)],6),L(We,{"is-open":a(y),onClose:p[4]||(p[4]=M=>j()),entry:a(t)},null,8,["is-open","entry"])],4)}}});const ot=ie(tt,[["__scopeId","data-v-a515f72a"]]),nt={style:"position: relative;"},lt=K({__name:"HomeView",setup(e){const o=P();function i(){for(const s of o.entries)console.log(s.isExpanded),s.isExpanded&&(s.isExpanded=!1)}return(s,h)=>(S(),b("div",nt,[(S(!0),b(me,null,Ae(a(o).entries.filter(r=>r.isVisible==!0).slice(0,5),r=>(S(),b("div",{key:r.todoEntry.title},[L(ot,{entry:r,style:"margin-bottom: 5px",onCollapseOthers:i},null,8,["entry"])]))),128))]))}});export{lt as default};
