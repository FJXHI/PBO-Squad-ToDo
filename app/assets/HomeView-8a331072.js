import{_ as Z,a as ee,b as le}from"./icon_edit-34456b79.js";import{o as te,n as re,g as ce,a as de,u as c,b as ne,c as C,r as m,w as X,d as J,e as q,f as b,h as ue,i as pe,T as fe,j as E,k as d,l as F,m as T,_ as se,p as oe,q as $,t as W,s as K,v as he,x as Q,y as ve,z as _e,F as me,A as ye}from"./index-9655a0de.js";import{_ as xe}from"./TheInputForm.vue_vue_type_style_index_0_lang-418d996d.js";const ge="/PBO-Squad-ToDo/assets/icon_deadline.png",be="/PBO-Squad-ToDo/assets/icon_timespan.png";function ie(e){return ce()?(de(e),!0):!1}function ae(e){return typeof e=="function"?e():c(e)}const we=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const Ee=Object.prototype.toString,Se=e=>Ee.call(e)==="[object Object]",R=()=>{};function ke(e){return e||ne()}function Ce(e,o=!0,a){const i=ke(a);i?te(e,i):o?e():re(e)}function O(e){var o;const a=ae(e);return(o=a==null?void 0:a.$el)!=null?o:a}const V=we?window:void 0;function N(...e){let o,a,i,f;if(typeof e[0]=="string"||Array.isArray(e[0])?([a,i,f]=e,o=V):[o,a,i,f]=e,!o)return R;Array.isArray(a)||(a=[a]),Array.isArray(i)||(i=[i]);const l=[],h=()=>{l.forEach(t=>t()),l.length=0},p=(t,n,u,_)=>(t.addEventListener(n,u,_),()=>t.removeEventListener(n,u,_)),y=X(()=>[O(o),ae(f)],([t,n])=>{if(h(),!t)return;const u=Se(n)?{...n}:n;l.push(...a.flatMap(_=>i.map(x=>p(t,_,x,u))))},{immediate:!0,flush:"post"}),v=()=>{y(),h()};return ie(v),v}function $e(){const e=m(!1);return ne()&&te(()=>{e.value=!0}),e}function Oe(e){const o=$e();return C(()=>(o.value,!!e()))}function Be(e,o,a={}){const{window:i=V,...f}=a;let l;const h=Oe(()=>i&&"ResizeObserver"in i),p=()=>{l&&(l.disconnect(),l=void 0)},y=C(()=>Array.isArray(e)?e.map(n=>O(n)):[O(e)]),v=X(y,n=>{if(p(),h.value&&i){l=new ResizeObserver(o);for(const u of n)u&&l.observe(u,f)}},{immediate:!0,flush:"post",deep:!0}),t=()=>{p(),v()};return ie(t),{isSupported:h,stop:t}}function P(e,o={width:0,height:0},a={}){const{window:i=V,box:f="content-box"}=a,l=C(()=>{var n,u;return(u=(n=O(e))==null?void 0:n.namespaceURI)==null?void 0:u.includes("svg")}),h=m(o.width),p=m(o.height),{stop:y}=Be(e,([n])=>{const u=f==="border-box"?n.borderBoxSize:f==="content-box"?n.contentBoxSize:n.devicePixelContentBoxSize;if(i&&l.value){const _=O(e);if(_){const x=i.getComputedStyle(_);h.value=Number.parseFloat(x.width),p.value=Number.parseFloat(x.height)}}else if(u){const _=Array.isArray(u)?u:[u];h.value=_.reduce((x,{inlineSize:g})=>x+g,0),p.value=_.reduce((x,{blockSize:g})=>x+g,0)}else h.value=n.contentRect.width,p.value=n.contentRect.height},a);Ce(()=>{const n=O(e);n&&(h.value="offsetWidth"in n?n.offsetWidth:o.width,p.value="offsetHeight"in n?n.offsetHeight:o.height)});const v=X(()=>O(e),n=>{h.value=n?o.width:0,p.value=n?o.height:0});function t(){y(),v()}return{width:h,height:p,stop:t}}function Me(e,o={}){const{threshold:a=50,onSwipe:i,onSwipeEnd:f,onSwipeStart:l,passive:h=!0,window:p=V}=o,y=J({x:0,y:0}),v=J({x:0,y:0}),t=C(()=>y.x-v.x),n=C(()=>y.y-v.y),{max:u,abs:_}=Math,x=C(()=>u(_(t.value),_(n.value))>=a),g=m(!1),D=C(()=>x.value?_(t.value)>_(n.value)?t.value>0?"left":"right":n.value>0?"up":"down":"none"),B=s=>[s.touches[0].clientX,s.touches[0].clientY],I=(s,r)=>{y.x=s,y.y=r},S=(s,r)=>{v.x=s,v.y=r};let w;const A=Te(p==null?void 0:p.document);h?w=A?{passive:!0}:{capture:!1}:w=A?{passive:!1,capture:!0}:{capture:!0};const Y=s=>{g.value&&(f==null||f(s,D.value)),g.value=!1},M=[N(e,"touchstart",s=>{if(s.touches.length!==1)return;w.capture&&!w.passive&&s.preventDefault();const[r,k]=B(s);I(r,k),S(r,k),l==null||l(s)},w),N(e,"touchmove",s=>{if(s.touches.length!==1)return;const[r,k]=B(s);S(r,k),!g.value&&x.value&&(g.value=!0),g.value&&(i==null||i(s))},w),N(e,["touchend","touchcancel"],Y,w)];return{isPassiveEventSupported:A,isSwiping:g,direction:D,coordsStart:y,coordsEnd:v,lengthX:t,lengthY:n,stop:()=>M.forEach(s=>s())}}function Te(e){if(!e)return!1;let o=!1;const a={get passive(){return o=!0,!1}};return e.addEventListener("x",R,a),e.removeEventListener("x",R),o}const ze={key:0,class:"modal-mask"},De={class:"modal-wrapper"},Ie={class:"modal-container"},Ae={class:"modal-body"},je=q({__name:"TheInputModal",props:{isOpen:{type:Boolean,required:!0},entry:{type:Object}},emits:["close"],setup(e,{emit:o}){const a=o;function i(){a("close")}return(f,l)=>(b(),ue(fe,{name:"modal"},{default:pe(()=>[e.isOpen?(b(),E("div",ze,[d("div",De,[d("div",Ie,[d("div",Ae,[F(xe,{onCloseaction:l[0]||(l[0]=h=>i()),entry:e.entry},null,8,["entry"])])])])])):T("",!0)]),_:1}))}});const We=se(je,[["__scopeId","data-v-d5634a4d"]]),z=e=>(ve("data-v-6acd2459"),e=e(),_e(),e),Le={class:"info-box-1d"},Ve={key:0,class:"entry-text"},Ne=z(()=>d("img",{alt:"Deadline",src:ge},null,-1)),Pe={key:1,class:"entry-text"},Re=z(()=>d("img",{alt:"Expenditure",src:be},null,-1)),Xe={key:0,style:"color: #000000; padding: 0 0 10px 0; position: relative;",class:"text-base"},qe={key:1},Fe={class:"info-box-1d"},Ye=z(()=>d("img",{alt:"Delete",style:{},src:Z},null,-1)),Ge=[Ye],He=z(()=>d("img",{alt:"Edit",src:le},null,-1)),Ue=[He],Je=z(()=>d("img",{alt:"Done",src:ee},null,-1)),Ke=[Je],L=40,Qe=q({__name:"CompactEntry",props:{entry:{type:Object,required:!0}},emits:["collapse-others"],setup(e,{emit:o}){const a=oe(),i=e,f=m(null),l=P(f),h=m(null),p=m(null),y={width:P(p).width,height:P(p).height};let v=m(!1),t=i.entry;function n(){t.metadata.isExpanded||D(),t.metadata.isExpanded=!t.metadata.isExpanded}function u(s){console.log("Clicked Delete"),Q(s,!0)}function _(s){console.log("editClicked"),v.value=!v.value}function x(s){console.log("Clicked Done"),Q(s,!1)}function g(){v.value=!1}function D(){for(const s of a.entries)console.log(s.metadata.isExpanded),s.metadata.isExpanded&&(s.metadata.isExpanded=!1)}const B=m(null),I=C(()=>{var s;return(s=B.value)==null?void 0:s.offsetWidth}),S=m("0"),w=m(1);m(0),m(0),m(0);const{direction:A,isSwiping:Y,lengthX:M,lengthY:G}=Me(f,{passive:!0,onSwipe(s){if(I.value&&Math.abs(G.value)<50){const r=Math.abs(M.value);r/I.value*100>L?S.value=`${-Math.sign(M.value)*L}%`:S.value=`${-Math.sign(M.value)*r}px`}else S.value="0",w.value=1},onSwipeEnd(s,r){S.value="0"}});return(s,r)=>{var k,H,U;return b(),E("span",{ref_key:"container",ref:B,class:"horizontal-box stretch-horizontally",style:$(`position: relative; min-height: 16vh; overflow: hidden; background-color: ${c(t).color}; `)},[d("article",{ref_key:"entryBox",ref:f,class:he(["entry-box",c(t).metadata.isExpanded?"detail-height":"compact-height"]),style:$(`position: relative; width: 100%; left: ${S.value}; margin: 0; transition: all 200ms ease-out;`),onClick:r[3]||(r[3]=j=>n())},[d("aside",{class:"delete-box restrict-size",style:$(`position: absolute; display: flex; width: ${L}%; height: 100%; left: 0; transform: translateX(-100%)`)},[d("img",{alt:"",class:"icon no-padding center",src:Z,style:$(`max-width: ${c(l).height.value/2}px`)},null,4)],4),d("aside",{class:"tick-box restrict-size",style:$(`position: absolute; display: flex; width: ${L}%; height: 100%; right: 0; transform: translateX(100%)`)},[d("img",{alt:"",class:"icon no-padding center",src:ee,style:$(`max-width: ${c(l).height.value/2}px`)},null,4)],4),d("div",{ref_key:"content",ref:p,style:$(`width: ${y.width}px; padding: 10px;`)},[d("h1",{ref_key:"title",ref:h,class:"text-2xl font-medium"},W((k=c(t))!=null&&k.title?(H=c(t))==null?void 0:H.title:""),513),d("section",Le,[c(t).deadline!=null?(b(),E("span",Ve,[Ne,K(" "+W((U=c(t))==null?void 0:U.deadline.toLocaleDateString()),1)])):T("",!0),c(t).expenditure!=null?(b(),E("span",Pe,[Re,K(" "+W(c(t).expenditure.time+" "+c(t).expenditure.unit),1)])):T("",!0)]),c(t)&&c(t).description!=null?(b(),E("p",Xe,W(c(t).description),1)):T("",!0),c(t).metadata.isExpanded?(b(),E("span",qe,[d("nav",Fe,[d("button",{onClick:r[0]||(r[0]=j=>u(c(t))),class:"flex justify-center"},Ge),d("button",{onClick:r[1]||(r[1]=j=>_(c(t))),class:"flex justify-center"},Ue),d("button",{onClick:r[2]||(r[2]=j=>x(c(t))),class:"flex justify-center"},Ke)])])):T("",!0)],4)],6),F(We,{"is-open":c(v),onClose:r[4]||(r[4]=j=>g()),entry:c(t)},null,8,["is-open","entry"])],4)}}});const Ze=se(Qe,[["__scopeId","data-v-6acd2459"]]),et={style:"position: relative;"},ot=q({__name:"HomeView",setup(e){const o=oe();function a(){for(const i of o.entries)console.log(i.metadata.isExpanded),i.metadata.isExpanded&&(i.metadata.isExpanded=!1)}return(i,f)=>(b(),E("div",et,[(b(!0),E(me,null,ye(c(o).entries.filter(l=>l.metadata.isVisible==!0).slice(0,5),l=>(b(),E("div",{key:l.title},[F(Ze,{entry:l,style:"margin-bottom: 5px",onCollapseOthers:a},null,8,["entry"])]))),128))]))}});export{ot as default};
