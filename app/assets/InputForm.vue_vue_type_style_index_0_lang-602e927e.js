import{e as U,r as d,o as k,i as T,j as i,E as r,G as c,H as g,p as f,q as y,I as w,J as M,h as A,l as b,K as C,L as I,M as N}from"./index-ba18fe2d.js";const B={class:"edit"},F=["onSubmit"],j=i("label",{for:"id_title"},"Title:",-1),q=i("label",{for:"id_date"},"Date:",-1),L=i("label",{for:"id_duration"},"Estimated duration:",-1),O={style:{display:"flex"}},z=i("option",{value:"min"},"minutes",-1),G=i("option",{value:"h"},"hours",-1),H=i("option",{value:"days"},"days",-1),J=i("option",{value:"weeks"},"weeks",-1),K=[z,G,H,J],P=i("label",{for:"id_color"},"Color:",-1),Q=i("label",{for:"id_descript"},"Description:",-1),R={class:"edit_btn"},Y=U({__name:"InputForm",props:{entry:{type:Object}},emits:["closeaction"],setup(h,{emit:x}){const s=d(""),l=d(""),a=d(""),u=d("min"),p=d(""),_=d("#ff3b30"),m=x,o=h;k(()=>{var e;if(o.entry){s.value=o.entry.title||"",l.value=((e=o.entry.deadline)==null?void 0:e.toISOString().split("T")[0])||"";const t=o.entry.expenditure?E(o.entry.expenditure):["","min"];a.value=t[0].toString(),u.value=t[1].toString(),p.value=o.entry.description||"",_.value=o.entry.color||"#ff3b30"}});function D(e,t){switch(t){case"min":return e*60;case"h":return e*3600;case"days":return e*86400;case"weeks":return e*604800;default:throw new Error("No fitting unit found")}}function E(e){if(e%604800===0)return[e/604800,"weeks"];if(e%86400===0)return[e/86400,"days"];if(e%3600===0)return[e/3600,"h"];if(e%60===0)return[e/60,"min"];throw new Error("No fitting unit found")}const S=()=>{let e=o.entry?o.entry:{title:"",description:"",color:"",deadline:new Date,expenditure:0,metadata:{isVisible:!0,isExpanded:!1,addedAt:new Date,lastModifiedAt:new Date,deletedAt:void 0}};if(s.value.trim()!==""){let t;l.value.trim()!==""?t=new Date(l.value):t=void 0;let n=0;a.value?n=D(parseInt(a.value),u.value):n=void 0,e.title=s.value,e.description=p.value,e.color=_.value,e.deadline=t,e.expenditure=n}o.entry?(e.metadata.lastModifiedAt=new Date,C()):I(e),N(),v(),m("closeaction")},V=()=>{v(),m("closeaction")},v=()=>{s.value="",l.value="",a.value="",u.value="min",p.value=""};return(e,t)=>(A(),T("div",B,[i("form",{class:"input-field",onSubmit:M(S,["prevent"])},[j,r(i("input",{class:"user-input",type:"text",id:"id_title","onUpdate:modelValue":t[0]||(t[0]=n=>s.value=n),placeholder:"Title",required:""},null,512),[[c,s.value]]),q,r(i("input",{class:"user-input",type:"date",id:"id_date","onUpdate:modelValue":t[1]||(t[1]=n=>l.value=n),placeholder:"Date",style:{"-webkit-appearance":"initial"}},null,512),[[c,l.value]]),L,i("div",O,[r(i("input",{class:"user-input duration",type:"number",pattern:"[0-9]*",inputmode:"numeric",id:"id_duration","onUpdate:modelValue":t[2]||(t[2]=n=>a.value=n),placeholder:"Estimated duration",min:"0"},null,512),[[c,a.value]]),r(i("select",{class:"user-input duration_unit",id:"id_duration_unit","onUpdate:modelValue":t[3]||(t[3]=n=>u.value=n)},K,512),[[g,u.value]])]),i("div",null,[P,r(i("input",{class:"user-input",type:"color",id:"id_color","onUpdate:modelValue":t[4]||(t[4]=n=>_.value=n)},null,512),[[c,_.value]])]),Q,r(i("textarea",{class:"user-input input_descript",id:"id_descript","onUpdate:modelValue":t[5]||(t[5]=n=>p.value=n),placeholder:"Description",rows:"4",style:{resize:"none"}},null,512),[[c,p.value]]),i("span",R,[f(w,{class:"btn_cancel",type:"button",onClick:V},{default:y(()=>[b("Cancel")]),_:1}),f(w,{class:"btn_save",type:"submit"},{default:y(()=>[b("Save")]),_:1})])],40,F)]))}});export{Y as _};
