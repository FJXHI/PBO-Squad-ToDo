import{e as S,r,h as m,i as f,j as t,D as u,E as p,F as x,z as C,o as I,G as M,p as v,q as D,H as b,I as F,l as E,J as N,K as B,L as $}from"./index-5491b5c7.js";const L=t("label",{for:"id_tags"},"Color:",-1),O={id:"tag-list"},j=["value"],q=S({__name:"TagDropdown",setup(y){const _=r(""),a=["Uni","Work","Other"];return(d,l)=>(m(),f(x,null,[L,t("div",null,[u(t("input",{class:"user-input",type:"color",id:"colorPicker","onUpdate:modelValue":l[0]||(l[0]=o=>_.value=o)},null,512),[[p,_.value]])]),t("datalist",O,[(m(),f(x,null,C(a,o=>t("option",{key:o,value:o},null,8,j)),64))])],64))}}),z={class:"edit"},G=["onSubmit"],H=t("label",{for:"id_title"},"Title:",-1),J=t("label",{for:"id_date"},"Date:",-1),K=t("label",{for:"id_duration"},"Estimated duration:",-1),P={style:{display:"flex"}},W=t("option",{value:"min"},"minutes",-1),Q=t("option",{value:"h"},"hours",-1),R=t("option",{value:"days"},"days",-1),X=t("option",{value:"weeks"},"weeks",-1),Y=[W,Q,R,X],Z=t("label",{for:"id_descript"},"Description:",-1),ee={class:"edit_btn"},ie=S({__name:"InputForm",props:{entry:{type:Object}},emits:["closeaction"],setup(y,{emit:_}){const a=r(""),d=r(""),l=r(""),o=r("min"),c=r(""),T=r(""),h=r("#000000"),g=_,s=y;I(()=>{var e;if(s.entry){a.value=s.entry.title||"",d.value=((e=s.entry.deadline)==null?void 0:e.toISOString().split("T")[0])||"";const n=s.entry.expenditure?k(s.entry.expenditure):["","min"];l.value=n[0].toString(),o.value=n[1].toString(),c.value=s.entry.description||"",h.value=s.entry.color||"#ff3b30"}});function U(e,n){switch(console.log("convertToSeconds",e,n),n){case"min":return e*60;case"h":return e*3600;case"days":return e*86400;case"weeks":return e*604800;default:throw new Error("No fitting unit found")}}function k(e){if(e%604800===0)return[e/604800,"weeks"];if(e%86400===0)return[e/86400,"days"];if(e%3600===0)return[e/3600,"h"];if(e%60===0)return[e/60,"min"];throw new Error("No fitting unit found")}const V=()=>{let e=s.entry?s.entry:{title:"",description:"",color:"",deadline:new Date,expenditure:0,metadata:{isVisible:!0,isExpanded:!1,addedAt:new Date,lastModifiedAt:new Date,deletedAt:void 0}};if(a.value.trim()!==""){let n;d.value.trim()!==""?n=new Date(d.value):n=void 0;let i=0;l.value?i=U(parseInt(l.value),o.value):i=void 0,e.title=a.value,e.description=c.value,e.color=h.value,e.deadline=n,e.expenditure=i}s.entry?(console.log("Updating existing entry"),e.metadata.lastModifiedAt=new Date,N()):(console.log("Adding existing entry"),B(e)),$(),console.log(e),w(),g("closeaction")},A=()=>{w(),g("closeaction")},w=()=>{a.value="",d.value="",l.value="",o.value="min",c.value="",T.value=""};return(e,n)=>(m(),f("div",z,[t("form",{class:"input-field",onSubmit:F(V,["prevent"])},[H,u(t("input",{class:"user-input",type:"text",id:"id_title","onUpdate:modelValue":n[0]||(n[0]=i=>a.value=i),placeholder:"Title",required:""},null,512),[[p,a.value]]),J,u(t("input",{class:"user-input",type:"date",id:"id_date","onUpdate:modelValue":n[1]||(n[1]=i=>d.value=i),placeholder:"Date"},null,512),[[p,d.value]]),K,t("div",P,[u(t("input",{class:"user-input duration",type:"number",pattern:"[0-9]*",inputmode:"numeric",id:"id_duration","onUpdate:modelValue":n[2]||(n[2]=i=>l.value=i),placeholder:"Estimated duration",min:"0"},null,512),[[p,l.value]]),u(t("select",{class:"user-input duration_unit",id:"id_duration_unit","onUpdate:modelValue":n[3]||(n[3]=i=>o.value=i)},Y,512),[[M,o.value]])]),t("div",null,[v(q)]),Z,u(t("textarea",{class:"user-input input_descript",id:"id_descript","onUpdate:modelValue":n[4]||(n[4]=i=>c.value=i),placeholder:"Description",rows:"4",style:{resize:"none"}},null,512),[[p,c.value]]),t("span",ee,[v(b,{class:"btn_cancel",type:"button",onClick:A},{default:D(()=>[E("Cancel")]),_:1}),v(b,{class:"btn_save",type:"submit"},{default:D(()=>[E("Save")]),_:1})])],40,G)]))}});export{ie as _};
