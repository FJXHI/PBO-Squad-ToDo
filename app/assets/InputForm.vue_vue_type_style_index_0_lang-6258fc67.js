import{e as E,r as d,h as f,i as y,D as u,E as c,j as n,F as x,z as I,o as M,G as C,p as m,q as b,H as D,I as F,l as T,J as N,K as B,L}from"./index-74cb6163.js";const $={id:"tag-list"},j=["value"],q=E({__name:"TagDropdown",setup(g){const _=d(""),a=["Uni","Work","Hobby"];return(r,l)=>(f(),y(x,null,[u(n("input",{list:"tag-list",id:"id_tags",class:"user-input duration",placeholder:"Tags","onUpdate:modelValue":l[0]||(l[0]=o=>_.value=o)},null,512),[[c,_.value]]),n("datalist",$,[(f(),y(x,null,I(a,o=>n("option",{key:o,value:o},null,8,j)),64))])],64))}}),z={class:"edit"},H=["onSubmit"],O=n("label",{for:"id_title"},"Title:",-1),G=n("label",{for:"id_date"},"Date:",-1),J=n("label",{for:"id_duration"},"Estimated duration:",-1),K={style:{display:"flex"}},P=n("option",{value:"min"},"minutes",-1),W=n("option",{value:"h"},"hours",-1),Q=n("option",{value:"days"},"days",-1),R=n("option",{value:"weeks"},"weeks",-1),X=[P,W,Q,R],Y=n("label",{for:"id_tags"},"Tags:",-1),Z=n("label",{for:"id_descript"},"Description:",-1),ee={class:"edit_btn"},ie=E({__name:"InputForm",props:{entry:{type:Object}},emits:["closeaction"],setup(g,{emit:_}){const a=d(""),r=d(""),l=d(""),o=d("min"),p=d(""),S=d(""),v=d("#000000"),h=_,s=g;M(()=>{var e;if(s.entry){a.value=s.entry.title||"",r.value=((e=s.entry.deadline)==null?void 0:e.toISOString().split("T")[0])||"";const t=s.entry.expenditure?V(s.entry.expenditure):["","min"];l.value=t[0].toString(),o.value=t[1].toString(),p.value=s.entry.description||"",v.value=s.entry.color||"#ff3b30"}});function U(e,t){switch(console.log("convertToSeconds",e,t),t){case"min":return e*60;case"h":return e*3600;case"days":return e*86400;case"weeks":return e*604800;default:throw new Error("No fitting unit found")}}function V(e){if(e%604800===0)return[e/604800,"weeks"];if(e%86400===0)return[e/86400,"days"];if(e%3600===0)return[e/3600,"h"];if(e%60===0)return[e/60,"min"];throw new Error("No fitting unit found")}const k=()=>{let e=s.entry?s.entry:{title:"",description:"",color:"",deadline:new Date,expenditure:0,metadata:{isVisible:!0,isExpanded:!1,addedAt:new Date,lastModifiedAt:new Date,deletedAt:void 0}};if(a.value.trim()!==""){let t;r.value.trim()!==""?t=new Date(r.value):t=void 0;let i=0;l.value?i=U(parseInt(l.value),o.value):i=void 0,e.title=a.value,e.description=p.value,e.color=v.value,e.deadline=t,e.expenditure=i}s.entry?(console.log("Updating existing entry"),e.metadata.lastModifiedAt=new Date,N()):(console.log("Adding existing entry"),B(e)),L(),console.log(e),w(),h("closeaction")},A=()=>{w(),h("closeaction")},w=()=>{a.value="",r.value="",l.value="",o.value="min",p.value="",S.value=""};return(e,t)=>(f(),y("div",z,[n("form",{class:"input-field",onSubmit:F(k,["prevent"])},[O,u(n("input",{class:"user-input",type:"text",id:"id_title","onUpdate:modelValue":t[0]||(t[0]=i=>a.value=i),placeholder:"Title",required:""},null,512),[[c,a.value]]),G,u(n("input",{class:"user-input",type:"date",id:"id_date","onUpdate:modelValue":t[1]||(t[1]=i=>r.value=i),placeholder:"Date"},null,512),[[c,r.value]]),J,n("div",K,[u(n("input",{class:"user-input duration",type:"number",pattern:"[0-9]*",inputmode:"numeric",id:"id_duration","onUpdate:modelValue":t[2]||(t[2]=i=>l.value=i),placeholder:"Estimated duration",min:"0"},null,512),[[c,l.value]]),u(n("select",{class:"user-input duration_unit",id:"id_duration_unit","onUpdate:modelValue":t[3]||(t[3]=i=>o.value=i)},X,512),[[C,o.value]])]),Y,n("div",null,[m(q),u(n("input",{class:"user-input short",type:"color",id:"colorPicker","onUpdate:modelValue":t[4]||(t[4]=i=>v.value=i)},null,512),[[c,v.value]])]),Z,u(n("textarea",{class:"user-input input_descript",id:"id_descript","onUpdate:modelValue":t[5]||(t[5]=i=>p.value=i),placeholder:"Description",rows:"4",style:{resize:"none"}},null,512),[[c,p.value]]),n("span",ee,[m(D,{class:"btn_cancel",type:"button",onClick:A},{default:b(()=>[T("Cancel")]),_:1}),m(D,{class:"btn_save",type:"submit"},{default:b(()=>[T("Save")]),_:1})])],40,H)]))}});export{ie as _};
