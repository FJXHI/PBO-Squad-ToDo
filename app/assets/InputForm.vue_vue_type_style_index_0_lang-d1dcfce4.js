import{e as U,r as s,o as V,h as k,i as A,j as n,D as r,E as p,G as C,p as f,q as y,H as w,I,l as b,J as M,K as N,L as B}from"./index-c6fd3bf0.js";const F={class:"edit"},j=["onSubmit"],q=n("label",{for:"id_title"},"Title:",-1),L=n("label",{for:"id_date"},"Date:",-1),O=n("label",{for:"id_duration"},"Estimated duration:",-1),z={style:{display:"flex"}},G=n("option",{value:"min"},"minutes",-1),H=n("option",{value:"h"},"hours",-1),J=n("option",{value:"days"},"days",-1),K=n("option",{value:"weeks"},"weeks",-1),P=[G,H,J,K],Q=n("label",{for:"id_tags"},"Color:",-1),R=n("label",{for:"id_descript"},"Description:",-1),W={class:"edit_btn"},Z=U({__name:"InputForm",props:{entry:{type:Object}},emits:["closeaction"],setup(h,{emit:x}){const l=s(""),a=s(""),d=s(""),u=s("min"),c=s(""),g=s(""),_=s("#ff3b30"),v=x,o=h;V(()=>{var e;if(o.entry){l.value=o.entry.title||"",a.value=((e=o.entry.deadline)==null?void 0:e.toISOString().split("T")[0])||"";const t=o.entry.expenditure?E(o.entry.expenditure):["","min"];d.value=t[0].toString(),u.value=t[1].toString(),c.value=o.entry.description||"",_.value=o.entry.color||"#ff3b30"}});function D(e,t){switch(console.log("convertToSeconds",e,t),t){case"min":return e*60;case"h":return e*3600;case"days":return e*86400;case"weeks":return e*604800;default:throw new Error("No fitting unit found")}}function E(e){if(e%604800===0)return[e/604800,"weeks"];if(e%86400===0)return[e/86400,"days"];if(e%3600===0)return[e/3600,"h"];if(e%60===0)return[e/60,"min"];throw new Error("No fitting unit found")}const S=()=>{let e=o.entry?o.entry:{title:"",description:"",color:"",deadline:new Date,expenditure:0,metadata:{isVisible:!0,isExpanded:!1,addedAt:new Date,lastModifiedAt:new Date,deletedAt:void 0}};if(l.value.trim()!==""){let t;a.value.trim()!==""?t=new Date(a.value):t=void 0;let i=0;d.value?i=D(parseInt(d.value),u.value):i=void 0,e.title=l.value,e.description=c.value,e.color=_.value,e.deadline=t,e.expenditure=i}o.entry?(console.log("Updating existing entry"),e.metadata.lastModifiedAt=new Date,M()):(console.log("Adding existing entry"),N(e)),B(),console.log(e),m(),v("closeaction")},T=()=>{m(),v("closeaction")},m=()=>{l.value="",a.value="",d.value="",u.value="min",c.value="",g.value=""};return(e,t)=>(k(),A("div",F,[n("form",{class:"input-field",onSubmit:I(S,["prevent"])},[q,r(n("input",{class:"user-input",type:"text",id:"id_title","onUpdate:modelValue":t[0]||(t[0]=i=>l.value=i),placeholder:"Title",required:""},null,512),[[p,l.value]]),L,r(n("input",{class:"user-input",type:"date",id:"id_date","onUpdate:modelValue":t[1]||(t[1]=i=>a.value=i),placeholder:"Date",style:{"-webkit-appearance":"initial"}},null,512),[[p,a.value]]),O,n("div",z,[r(n("input",{class:"user-input duration",type:"number",pattern:"[0-9]*",inputmode:"numeric",id:"id_duration","onUpdate:modelValue":t[2]||(t[2]=i=>d.value=i),placeholder:"Estimated duration",min:"0"},null,512),[[p,d.value]]),r(n("select",{class:"user-input duration_unit",id:"id_duration_unit","onUpdate:modelValue":t[3]||(t[3]=i=>u.value=i)},P,512),[[C,u.value]])]),n("div",null,[Q,r(n("input",{class:"user-input",type:"color",id:"colorPicker","onUpdate:modelValue":t[4]||(t[4]=i=>_.value=i)},null,512),[[p,_.value]])]),R,r(n("textarea",{class:"user-input input_descript",id:"id_descript","onUpdate:modelValue":t[5]||(t[5]=i=>c.value=i),placeholder:"Description",rows:"4",style:{resize:"none"}},null,512),[[p,c.value]]),n("span",W,[f(w,{class:"btn_cancel",type:"button",onClick:T},{default:y(()=>[b("Cancel")]),_:1}),f(w,{class:"btn_save",type:"submit"},{default:y(()=>[b("Save")]),_:1})])],40,j)]))}});export{Z as _};
