import{d as I,a as le,r as ie,_ as Q,b as Z,E as q,I as re,c as ue}from"./relativeTime-3f7c856b.js";import{o as ee,n as ce,g as de,a as fe,u as o,b as te,c as C,r as _,w as G,d as U,e as se,f as ne,h as S,i as k,j as y,k as $,t as z,l as J,m as L,p as T,q as F,s as V,v as K,x as pe,F as ve,y as he}from"./index-34c483e6.js";import"./InputForm.vue_vue_type_style_index_0_lang-6295bb22.js";const xe="/PBO-Squad-ToDo/app/assets/icon_deadline.svg",me="/PBO-Squad-ToDo/app/assets/icon_timespan.svg";function oe(e){return de()?(fe(e),!0):!1}function ae(e){return typeof e=="function"?e():o(e)}const ye=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const ge=Object.prototype.toString,we=e=>ge.call(e)==="[object Object]",Y=()=>{};function _e(e){return e||te()}function be(e,n=!0,l){const a=_e(l);a?ee(e,a):n?e():ce(e)}function B(e){var n;const l=ae(e);return(n=l==null?void 0:l.$el)!=null?n:l}const N=ye?window:void 0;function H(...e){let n,l,a,m;if(typeof e[0]=="string"||Array.isArray(e[0])?([l,a,m]=e,n=N):[n,l,a,m]=e,!n)return Y;Array.isArray(l)||(l=[l]),Array.isArray(a)||(a=[a]);const i=[],v=()=>{i.forEach(d=>d()),i.length=0},x=(d,t,u,c)=>(d.addEventListener(t,u,c),()=>d.removeEventListener(t,u,c)),r=G(()=>[B(n),ae(m)],([d,t])=>{if(v(),!d)return;const u=we(t)?{...t}:t;i.push(...l.flatMap(c=>a.map(h=>x(d,c,h,u))))},{immediate:!0,flush:"post"}),s=()=>{r(),v()};return oe(s),s}function Ee(){const e=_(!1);return te()&&ee(()=>{e.value=!0}),e}function Se(e){const n=Ee();return C(()=>(n.value,!!e()))}function ke(e,n,l={}){const{window:a=N,...m}=l;let i;const v=Se(()=>a&&"ResizeObserver"in a),x=()=>{i&&(i.disconnect(),i=void 0)},r=C(()=>Array.isArray(e)?e.map(t=>B(t)):[B(e)]),s=G(r,t=>{if(x(),v.value&&a){i=new ResizeObserver(n);for(const u of t)u&&i.observe(u,m)}},{immediate:!0,flush:"post",deep:!0}),d=()=>{x(),s()};return oe(d),{isSupported:v,stop:d}}function X(e,n={width:0,height:0},l={}){const{window:a=N,box:m="content-box"}=l,i=C(()=>{var t,u;return(u=(t=B(e))==null?void 0:t.namespaceURI)==null?void 0:u.includes("svg")}),v=_(n.width),x=_(n.height),{stop:r}=ke(e,([t])=>{const u=m==="border-box"?t.borderBoxSize:m==="content-box"?t.contentBoxSize:t.devicePixelContentBoxSize;if(a&&i.value){const c=B(e);if(c){const h=a.getComputedStyle(c);v.value=Number.parseFloat(h.width),x.value=Number.parseFloat(h.height)}}else if(u){const c=Array.isArray(u)?u:[u];v.value=c.reduce((h,{inlineSize:g})=>h+g,0),x.value=c.reduce((h,{blockSize:g})=>h+g,0)}else v.value=t.contentRect.width,x.value=t.contentRect.height},l);be(()=>{const t=B(e);t&&(v.value="offsetWidth"in t?t.offsetWidth:n.width,x.value="offsetHeight"in t?t.offsetHeight:n.height)});const s=G(()=>B(e),t=>{v.value=t?n.width:0,x.value=t?n.height:0});function d(){r(),s()}return{width:v,height:x,stop:d}}function Ce(e,n={}){const{threshold:l=50,onSwipe:a,onSwipeEnd:m,onSwipeStart:i,passive:v=!0,window:x=N}=n,r=U({x:0,y:0}),s=U({x:0,y:0}),d=C(()=>r.x-s.x),t=C(()=>r.y-s.y),{max:u,abs:c}=Math,h=C(()=>u(c(d.value),c(t.value))>=l),g=_(!1),O=C(()=>h.value?c(d.value)>c(t.value)?d.value>0?"left":"right":t.value>0?"up":"down":"none"),b=p=>[p.touches[0].clientX,p.touches[0].clientY],P=(p,E)=>{r.x=p,r.y=E},w=(p,E)=>{s.x=p,s.y=E};let f;const M=$e(x==null?void 0:x.document);v?f=M?{passive:!0}:{capture:!1}:f=M?{passive:!1,capture:!0}:{capture:!0};const j=p=>{g.value&&(m==null||m(p,O.value)),g.value=!1},A=[H(e,"touchstart",p=>{if(p.touches.length!==1)return;f.capture&&!f.passive&&p.preventDefault();const[E,W]=b(p);P(E,W),w(E,W),i==null||i(p)},f),H(e,"touchmove",p=>{if(p.touches.length!==1)return;const[E,W]=b(p);w(E,W),!g.value&&h.value&&(g.value=!0),g.value&&(a==null||a(p))},f),H(e,["touchend","touchcancel"],j,f)];return{isPassiveEventSupported:M,isSwiping:g,direction:O,coordsStart:r,coordsEnd:s,lengthX:d,lengthY:t,stop:()=>A.forEach(p=>p())}}function $e(e){if(!e)return!1;let n=!1;const l={get passive(){return n=!0,!1}};return e.addEventListener("x",Y,l),e.removeEventListener("x",Y),n}const Be={class:"flex flex-row flex-wrap pl-0"},Oe={key:0,class:"text-lg flex flex-grow-0 flex-shrink-0 basis-1/2"},Me=y("img",{alt:"Deadline",src:xe},null,-1),De={key:1,class:"text-lg flex flex-grow-0 flex-shrink-0 basis-1/2"},Te=y("img",{alt:"Expenditure",src:me},null,-1),je={key:0,class:"text-base relative pb-[10px]"},Ae={key:1},We={class:"flex flex-row flex-wrap pl-0"},ze=y("img",{alt:"Delete",style:{},src:Q},null,-1),Le=y("img",{alt:"Edit",src:ue},null,-1),Ve=y("img",{alt:"Done",src:Z},null,-1),R=40,Re=se({__name:"CompactEntry",props:{entry:{type:Object,required:!0}},setup(e){I.extend(le),I.extend(ie);const n=ne(),l=e,a=_(null),m=X(a),i=_(null),v=_(null),x={width:X(v).width,height:X(v).height};let r=_(!1),s=l.entry;function d(){s.metadata.isExpanded||t(),s.metadata.isExpanded=!s.metadata.isExpanded}function t(){for(const w of n.entries)w.metadata.isExpanded&&(w.metadata.isExpanded=!1)}const u=_(null),c=C(()=>{var w;return(w=u.value)==null?void 0:w.offsetWidth}),h=_("0"),g=_(1),{isSwiping:O,lengthX:b,lengthY:P}=Ce(a,{passive:!0,onSwipe(){if(c.value&&Math.abs(P.value)<50){const w=Math.abs(b.value);w/c.value*100>R?h.value=`${-Math.sign(b.value)*R}%`:h.value=`${-Math.sign(b.value)*w}px`}else h.value="0",g.value=1,O.value=!1},onSwipeEnd(){c.value&&Math.abs(b.value)/c.value>=.5?b.value<0?V(s,!0):V(s,!1):h.value="0"}});return(w,f)=>{var M,j,A;return S(),k("span",{ref_key:"container",ref:u,class:"flex flex-row relative w-full overflow-hidden",style:$({minHeight:"16vh",backgroundColor:o(s).color})},[y("article",{ref_key:"entryBox",ref:a,class:pe(["relative w-full m-0 text-black",{"min-h-[16vh]":o(s).metadata.isExpanded,"h-[16vh]":!o(s).metadata.isExpanded,"transition-none":o(O),"transition-all duration-200 ease-out":!o(O)}]),style:$({left:h.value}),onClick:f[3]||(f[3]=D=>d())},[y("aside",{class:"absolute bg-red-500 flex flex-grow-0 max-w-[40vw] h-full left-0 -translate-x-full",style:$(`width: ${R}%;`)},[y("img",{alt:"",class:"p-0 w-full mx-auto block",src:Q,style:$(`max-width: ${o(m).height.value/2}px`)},null,4)],4),y("aside",{class:"absolute flex bg-green-500 flex-grow-0 max-w-[40vw] h-full right-0 translate-x-full",style:$(`width: ${R}%;`)},[y("img",{alt:"",class:"p-0 w-full mx-auto block",src:Z,style:$(`max-width: ${o(m).height.value/2}px`)},null,4)],4),y("div",{ref_key:"content",ref:v,style:$(`width: ${x.width}px; padding: 10px;`)},[y("h1",{ref_key:"title",ref:i,class:"text-2xl font-medium"},z((M=o(s))!=null&&M.title?(j=o(s))==null?void 0:j.title:""),513),y("section",Be,[o(s).deadline!=null?(S(),k("span",Oe,[Me,J(" "+z((A=o(s))==null?void 0:A.deadline.toLocaleDateString()),1)])):L("",!0),o(s).expenditure!=null?(S(),k("span",De,[Te,J(" "+z(o(I).duration({seconds:o(s).expenditure}).humanize()),1)])):L("",!0)]),o(s).metadata.isExpanded&&o(s).description!=null?(S(),k("p",je,z(o(s).description),1)):L("",!0),o(s).metadata.isExpanded?(S(),k("span",Ae,[y("nav",We,[T(q,{onClick:f[0]||(f[0]=D=>o(V)(o(s),!0)),class:"flex justify-center"},{default:F(()=>[ze]),_:1}),T(q,{onClick:f[1]||(f[1]=D=>K(r)?r.value=!o(r):r=!o(r)),class:"flex justify-center"},{default:F(()=>[Le]),_:1}),T(q,{onClick:f[2]||(f[2]=D=>o(V)(o(s),!1)),class:"flex justify-center"},{default:F(()=>[Ve]),_:1})])])):L("",!0)],4)],6),T(re,{"is-open":o(r),onClose:f[4]||(f[4]=D=>K(r)?r.value=!1:r=!1),entry:o(s)},null,8,["is-open","entry"])],4)}}}),Ne={style:"position: relative;"},Fe=se({__name:"HomeView",setup(e){const n=ne();function l(){for(const a of n.entries)a.metadata.isExpanded&&(a.metadata.isExpanded=!1)}return(a,m)=>(S(),k("div",Ne,[(S(!0),k(ve,null,he(o(n).entries.filter(i=>i.metadata.isVisible==!0).slice(0,5),i=>(S(),k("div",{key:i.title},[T(Re,{entry:i,style:"margin-bottom: 5px",onCollapseOthers:l},null,8,["entry"])]))),128))]))}});export{Fe as default};
